<div class="container mx-auto p-4 sm:rounded-lg w-full text-sm flex flex-col gap-4">
  <ng-container *ngIf="(data$ | async) as standings">
    <div
      *ngIf="(dataService.lastCalculationDate$ | async) as lastCalculationDate"
      class="text-xxs text-gray-600 italic">
      {{('STANDINGS.LAST_CALCULATION_DATE' | transloco) + (lastCalculationDate | dateFormat) }}</div>
    <table
      class="w-full">
      <tr
        *ngFor="let user of standings | sortBy: ['points', 'correctVotes']: 'desc'; let i = index"
        [ngClass]="{
          'font-bold': (authService.getUserData$ | async)?.uid === user.uid
        }"
        class="border-gray-200 border-b-[1px] last:border-b-0"
      >
        <td
          [ngSwitch]="i"
          class="text-gray-700 text-right">
          <ng-container *ngSwitchCase="0">ðŸ¥‡</ng-container>
          <ng-container *ngSwitchCase="1">ðŸ¥ˆ</ng-container>
          <ng-container *ngSwitchCase="2">ðŸ¥‰</ng-container>
          <ng-container *ngSwitchDefault>{{i + 1}}.</ng-container>
        </td>
        <td class="w-full">{{user.name}}</td>
        <td class="font-bold">{{user.points}}</td>
        <td class="text-xxs text-gray-600 italic text-right whitespace-nowrap">
          {{user.correctVotes}} / {{user.correctVotes + user.incorrectVotes}}
        </td>
      </tr>
    </table>
    <div
      *ngIf="!standings.length"
      class="p-4 text-sm text-center text-gray-800 rounded-lg bg-gray-50"
      role="alert">
      {{ 'STANDINGS.EMPTY' | transloco }}
    </div>
  </ng-container>
  <div
    *ngIf="!(dataService.standings$ | async)"
    class="animate-pulse flex flex-col">
    <div
      *ngFor="let _ of loadingArray"
      class="border-gray-200 border-b-[1px] last:border-b-0 flex">
      <div class="rounded bg-gray-200 my-4 mx-2 h-5 w-12"></div>
      <div class="rounded bg-gray-200 my-4 mx-2 h-5 w-full"></div>
      <div class="rounded bg-gray-200 my-4 mx-2 h-5 w-12"></div>
      <div class="rounded bg-gray-200 my-4 mx-2 h-5 w-20"></div>
    </div>
  </div>
</div>
