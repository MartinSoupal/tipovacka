<div class="relative overflow-x-auto sm:rounded-lg mt-8 w-full text-sm flex flex-col gap-4">
  <ng-container *ngIf="!loading">
    <div
      class="w-full flex justify-between items-end mt-4">
      <div class="flex flex-col">
        <h2 class="">{{ chosenUserLeague?.name }}</h2>
        <div
          *ngIf="chosenUserLeague"
          class="text-xxs italic text-gray-600"
        >
          <span *ngFor="let leagues of chosenUserLeague.leagues; let i = index">
            {{ leagues + (i < chosenUserLeague.leagues.length - 1 ? ', ' : '') }}
          </span>
        </div>
      </div>
      <div class="flex gap-2">
        <button
          (click)="openCreateUserLeagueModal()"
          *ngIf="!userLeagues.length"
          class="btn btn-secondary"
        >
          <span class="material-icons md-18">add</span>
          {{ 'CREATE_USER_LEAGUE_BUTTON' | transloco }}
        </button>
        <button
          (click)="openChooseUserLeagueModal()"
          *ngIf="userLeagues.length"
          class="btn btn-secondary"
        >
          <span class="material-icons md-18">groups</span>
          {{ 'CHOOSE_USER_LEAGUE_BUTTON' | transloco: {count: userLeagues.length} }}
        </button>
        <button
          (click)="toggleSort()"
          *ngIf="users.length"
          class="btn btn-secondary">
          <span class="material-icons md-18">sort</span>
          <span class="hidden md:block">
        {{(sortBy === 'correctVotes' ? 'STANDINGS.FILTER.SUCCESSFUL_TIPS' : 'STANDINGS.FILTER.SUCCESSFUL_TIPS') | transloco}}
        </span>
        </button>
      </div>
    </div>
    <table
      *ngIf="!loading"
      class="w-full">
      <tr
        *ngFor="let user of users | sortBy: sortBy: 'desc'; let i = index"
        class="border-gray-200 border-b-[1px] last:border-b-0">
        <td class="text-gray-700 text-right">{{i + 1}}.</td>
        <td class="w-full">{{user.name}}</td>
        <td class="font-bold text-right">{{user.correctVotes}}</td>
        <td>
        <span
          [ngClass]="{
            'bg-red-100 text-red-800': user.correctVotes / user.totalVotes < 0.34,
            'bg-orange-100 text-orange-800': user.correctVotes / user.totalVotes > 0.33 && user.correctVotes / user.totalVotes < 0.67,
            'bg-green-100 text-green-800': user.correctVotes / user.totalVotes > 0.66
          }"
          class="badge font-medium "
        >
          {{(user.correctRatio * 100) | number: '1.1-1':'cs-CZ'}}%
        </span>
        </td>
      </tr>
    </table>
    <div
      *ngIf="!users.length"
      class="p-4 text-sm text-center text-gray-800 rounded-lg bg-gray-50"
      role="alert">
      {{ 'STANDINGS.EMPTY' | transloco }}
    </div>
  </ng-container>
  <div
    *ngIf="loading"
    class="animate-pulse flex flex-col">
    <div
      *ngFor="let _ of loadingArray"
      class="border-gray-200 border-b-[1px] last:border-b-0 flex">
      <div class="rounded bg-gray-200 my-4 mx-2 h-5 w-12"></div>
      <div class="rounded bg-gray-200 my-4 mx-2 h-5 w-full"></div>
      <div class="rounded bg-gray-200 my-4 mx-2 h-5 w-12"></div>
      <div class="rounded bg-gray-200 my-4 mx-2 h-5 w-20"></div>
    </div>
  </div>
</div>
