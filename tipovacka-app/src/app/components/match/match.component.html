<div class="flex flex-col w-full items-center rounded-xl relative overflow-hidden pt-4 pb-2 bg-gray-50 transition-all">
  <div class="absolute md:-left-12 -left-16 top-0 h-full flex items-end">
    <img
      [appImgSrcError]="'assets/images/players/default.png'"
      [ngClass]="{
        'opacity-30': hides['1']
      }"
      [src]="'assets/images/players/' + data.home + '.png'"
      class="h-[90%] w-auto"
    >
  </div>
  <div class="absolute md:-right-12 -right-16 top-0 h-full flex items-end">
    <img
      [appImgSrcError]="'assets/images/players/default.png'"
      [ngClass]="{
        'opacity-30': hides['2']
      }"
      [src]="'assets/images/players/' + data.away + '.png'"
      class="h-[90%] w-auto"
    >
  </div>
  <div class="z-10 absolute left-0 bottom-0 w-full h-16 bg-gradient-to-t from-gray-900/70 to-gray-900/0"></div>
  <div class="z-20 flex items-center gap-4">
    <img
      [alt]="data.league"
      class="h-6 w-auto"
      src="assets/images/{{data.league}}.png"
      srcset="assets/images/{{data.league}}.png"
    >
    <div class="flex flex-col text-xxs text-gray-950/70">
      <div>{{('ROUND.' + data.round) | transloco}}</div>
      <div>{{data.datetime | datetimeFormatBy}}</div>
    </div>
  </div>
  <div class="z-20 flex mt-6 gap-2 font-bold text-lg md:text-3xl w-full">
    <div class="flex-1 flex justify-end">
      <div class="drop-shadow-md">
        {{data.homeTeam.name}}
      </div>
    </div>
    <div class="opacity-30 text-center font-normal">vs</div>
    <div class="flex-1 flex">
      <div class="drop-shadow-md">
        {{data.awayTeam.name}}
      </div>
    </div>
  </div>
  <div class="z-20 flex gap-2 mt-2 w-full justify-center">
    <button
      (click)="chooseResult(1)"
      [disabled]="data.datetime! < now || sendingVote !== undefined"
      [ngClass]="{
        'opacity-50': hides['1'],
        'bg-green-600': states['1'] === 'correct',
        'bg-red-600': states['1'] === 'incorrect',
        'btn-secondary': states['1'] === 'normal'
      }"
      [style.background-color]="states['1'] === 'highlight' ? data.homeTeam.color : ''"
      [style.border-color]="states['1'] === 'highlight' ? data.homeTeam.color : ''"
      class="btn"
    >
      <img
        [ngClass]="{
            'hidden': states['1'] === 'normal'
          }"
        [src]="'assets/images/' + data.home + '.png'"
        class="h-8">
      <img
        [appImgSrcError]="'assets/images/' + data.home + '.png'"
        [ngClass]="{
            'hidden': states['1'] !== 'normal'
          }"
        [src]="'assets/images/' + data.home + '_for_white_bg.png'"
        class="h-8">
    </button>
    <button
      (click)="chooseResult(0)"
      [disabled]="data.datetime! < now || sendingVote !== undefined"
      [ngClass]="{
        'opacity-50': hides['0'],
        'bg-green-600': states['0'] === 'correct',
        'bg-red-600': states['0'] === 'incorrect',
        'btn-secondary': states['0'] === 'normal'
      }"
      [style.background-color]="states['0'] === 'highlight' ? '#333' : ''"
      [style.border-color]="states['0'] === 'highlight' ? '#333' : ''"
      class="btn w-[72px] flex justify-center"
    >
      <span
        [ngClass]="{
          'text-white': states['0'] === 'highlight' || states['0'] === 'correct' || states['0'] === 'incorrect',
          'text-gray-600': states['0'] === 'normal'
        }"
        class="material-icons md-24">close</span>
    </button>
    <button
      (click)="chooseResult(2)"
      [disabled]="data.datetime! < now || sendingVote !== undefined"
      [ngClass]="{
        'opacity-50': hides['2'],
        'bg-green-600': states['2'] === 'correct',
        'bg-red-600': states['2'] === 'incorrect',
        'btn-secondary': states['2'] === 'normal'
      }"
      [style.background-color]="states['2'] === 'highlight' ? data.awayTeam.color : ''"
      [style.border-color]="states['2'] === 'highlight' ? data.awayTeam.color : ''"
      class="btn"
    >
      <img
        [ngClass]="{
            'hidden': states['2'] === 'normal'
          }"
        [src]="'assets/images/' + data.away + '.png'"
        class="h-8">
      <img
        [appImgSrcError]="'assets/images/' + data.away + '.png'"
        [ngClass]="{
            'hidden': states['2'] !== 'normal'
          }"
        [src]="'assets/images/' + data.away + '_for_white_bg.png'"
        class="h-8">
    </button>
  </div>
  <div class="z-20 flex text-xxs mt-2 gap-1 text-white">
    <div>
      {{((data && data.totalVotes ? ((data![1] || 0) / data.totalVotes) : 0) * 100) | number: '1.0-0'}}%
      <span class="opacity-50">({{data![1]}})</span>
    </div>
    -
    <div>
      {{((data && data.totalVotes ? ((data![0] || 0) / data.totalVotes) : 0) * 100) | number: '1.0-0'}}%
      <span class="opacity-50">({{data![0]}})</span>
    </div>
    -
    <div>
      {{((data && data.totalVotes ? ((data![2] || 0) / data.totalVotes) : 0) * 100) | number: '1.0-0'}}%
      <span class="opacity-50">({{data![2]}})</span>
    </div>
  </div>
</div>
